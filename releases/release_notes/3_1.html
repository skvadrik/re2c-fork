
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Release 3.1 &#8212; re2c 4.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme-re2c.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="alternate" type="application/atom+xml" href="../../feed/atom.xml" title="Atom 1.0" />
    
 
  </head><body>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="re2c-logo">
    re2c
</div>

<h3><a href="../../index.html">Home</a></h3>
<div class="re2c-toc-global">
    <ul>
<li class="toctree-l1"><a class="reference internal" href="../../manual/manual.html">User manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/build.html">Build &amp; install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../benchmarks/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/changelog.html">Changelog</a></li>
</ul>

</div>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="release-3-1">
<h1>Release 3.1<a class="headerlink" href="#release-3-1" title="Permalink to this headline">Â¶</a></h1>
<p>The main focus of this release has been on internal rather than user-facing
changes. The codebase has been cleaned up and migrated to C++11, and the codegen
subsystem has undergone considerable simplification and rewrite. Some new
features have been added to improve submatch extraction with capturing groups
(see below for more details).</p>
<p><strong>Capturing groups.</strong>
Since release 1.0, re2c supported two ways of submatch extraction: tags with
leftmost greedy semantics (enabled with <code class="docutils literal notranslate"><span class="pre">--tags</span></code> option or <code class="docutils literal notranslate"><span class="pre">re2c:tags</span></code>
configuration) and capturing groups with POSIX longest-match semantics (enabled
with <code class="docutils literal notranslate"><span class="pre">--posix-captures</span></code> option or <code class="docutils literal notranslate"><span class="pre">re2c:posix-captures</span></code> configuration).
Capturing group syntax is traditionally used in regular expression libraries, so
it is preferable for some users. However, they found it
<a class="reference external" href="https://github.com/skvadrik/re2c/issues/438">problematic</a> to use with large
regular expressions: compile times are increased due to the complex POSIX
disambiguation algorithm, and the generated code is bloated, as every pair of
parentheses is a capturing group and it requires runtime operations to extract
submatch boundaries. This release addresses both problems.
First, it adds <code class="docutils literal notranslate"><span class="pre">--leftmost-captures</span></code> option and <code class="docutils literal notranslate"><span class="pre">re2c:leftmost-captures</span></code>
configuration that allow using capturing group syntax with leftmost greedy
semantics. Second, it adds new syntax <code class="docutils literal notranslate"><span class="pre">(!</span> <span class="pre">...)</span></code> for non-capturing groups, so
that the user can mark only a few selected groups for submatch extraction, and
avoid unnecessary overhead on other groups. It is also possible to flip defaults
with <code class="docutils literal notranslate"><span class="pre">--invert-captures</span></code> option or <code class="docutils literal notranslate"><span class="pre">re2c:invert_captures</span></code> configuration, so
that <code class="docutils literal notranslate"><span class="pre">(...)</span></code> is a capturing group and <code class="docutils literal notranslate"><span class="pre">(!</span> <span class="pre">...)</span></code> is a non-capturing one.</p>
<p><strong>TDFA paper and removal of experimental algorithms.</strong>
In previous releases, re2c added a few experimental algorithms for research
purposes (alternative types of automata for submatch extraction, different
approaches to POSIX disambiguation and epsilon-closure construction, etc.).
All these algorithms have been shown less efficient in the <a class="reference external" href="https://arxiv.org/abs/2206.01398">final TDFA paper</a> (see the <a class="reference external" href="https://re2c.org/benchmarks/benchmarks.html">benchmark results</a>). In this release the
following experimental algorithms have been removed: staDFA, TDFA(0),
backwards-matching, Kuklewicz POSIX disambiguation and GTOP shortest path
finding. The corresponding options are deprecated: they are still accepted for
backwards compatibility, but do nothing. This is part of the general effort to
keep re2c codebase simpler and easier to maintain.</p>
<p><strong>Codebase improvements.</strong>
Most of the work in this release has been dedicated to simplifying the codebase
and migrating it to C++11 standard. Codegen subsystem in particular has been
reorganized in four well-defined phases (analyze, generate, fixup, render) and
separated from parsing phase. Errors are now handled in a uniform way by
checking return codes and propagating them up the call stack. Memory allocation
has been improved with the use of slab allocators instead of global free lists.
Bison parsers now use pure API. Recursive functions that potentially cause stack
overflow have been rewritten in iterative form, and re2c test suite now runs
with 256K stack limit on CI. Finally, code style has been unified across the
codebase.</p>
<p><strong>Build system.</strong>
This release adds minimal Bazel integration: it is now possible to use re2c as a
tool in other projects with Bazel build systems (see commit <a class="reference external" href="https://github.com/skvadrik/re2c/commit/3205c867">3205c867</a> for a usage example). This
is <em>not</em> intended as a new build system alongside Autotools and CMake; Bazel
integration is minimal and does not support developer build features like
bootstrap, documentation, etc.</p>
<p><strong>CI improvements.</strong>
Continuous testing on GithubActions is more extensive now: it covers both build
systems (Autotools and CMake) as well as special validation modes, such as ASan,
UBSan and Valgrind.</p>
<p>For a full list of changes and bug fixes see the changelog
<a class="reference internal" href="../changelog/changelog.html#id17"><span class="std std-ref">3.1 (2023-07-19)</span></a>.
As always, thanks to all contributors, especially
<a class="reference external" href="https://github.com/trofi">Sergei Trofimovich</a>,
<a class="reference external" href="https://github.com/idigdoug">Doug Cook</a> and
<a class="reference external" href="https://github.com/helly25">Marcus Boerger</a>!</p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      Last updated on Feb 16, 2025.
    </div>
  </body>
</html>